/**********************************************************************************************************************************************************
 * ConvertFromXRData
 * -----------------
 *
 * 2021-09-05
 *
 * Converts XRData to an ordinary variable
 *
 * Roy Davies, Smart Digital Lab, University of Auckland.
 **********************************************************************************************************************************************************/

using System.Collections;
using System.Collections.Generic;
using UnityEngine;

// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Public functions
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
public interface _ConvertFromXRData
{
    void Input(XRData newValue);
}
// ----------------------------------------------------------------------------------------------------------------------------------------------------------



// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Main class
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
[AddComponentMenu("OpenXR UX/Connectors/Convert From XRData")]
public class ConvertFromXRData : MonoBehaviour, _ConvertFromXRData
{
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Public variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    public UnityBooleanEvent onChangeBoolean;
    public UnityFloatEvent onChangeFloat;
    public UnityIntegerEvent onChangeInteger;
    public UnityStringEvent onChangeString;
    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Private variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Convert the input value and send down the correct event queue
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    public void Input (XRData newValue)
    {
        switch (newValue.GetType())
        {
            case XRDataType.INT:
                if (onChangeInteger != null) onChangeInteger.Invoke(newValue.ToInt());
                break;
             case XRDataType.BOOL:
                if (onChangeBoolean != null) onChangeBoolean.Invoke(newValue.ToBool());
                break;               
             case XRDataType.FLOAT:
                if (onChangeFloat != null) onChangeFloat.Invoke(newValue.ToFloat());
                break;
            case XRDataType.STRING:
                if (onChangeString != null) onChangeString.Invoke(newValue.ToString());
                break;
            default:
                break;
        }
    }
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
}
