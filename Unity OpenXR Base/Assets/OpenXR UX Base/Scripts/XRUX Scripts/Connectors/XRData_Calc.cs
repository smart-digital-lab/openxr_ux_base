/**********************************************************************************************************************************************************
 * XRData_Calc
 * -----------
 *
 * 2021-09-27
 *
 * Add, Subtract, Divide or Multiply a set amount to / from XRData integer.
 *
 * Roy Davies, Smart Digital Lab, University of Auckland.
 **********************************************************************************************************************************************************/

using System.Collections;
using System.Collections.Generic;
using UnityEngine;

// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Public functions
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
public interface _XRData_Calc
{
    void Input(XRData A);
}
// ----------------------------------------------------------------------------------------------------------------------------------------------------------



// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Main class
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
[AddComponentMenu("OpenXR UX/Connectors/XRData Calc")]
public class XRData_Calc : MonoBehaviour, _XRData_Calc
{
    public enum operation {plus, minus, divided_by, times}
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Public variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    [Header("____________________________________________________________________________________________________")]
    [Header("Calculate using XRData.\n____________________________________________________________________________________________________")]
    [Header("INPUTS\n\n - Input() - Input Value.")]

    [Header("____________________________________________________________________________________________________")]
    [Header("SETTINGS")]
    [Header("")]
    public operation op = operation.plus;
    [Header("The amount to add to, subtract from, divide by or multiply with the input XRData.")]
    public float B;

    [Header("____________________________________________________________________________________________________")]
    [Header("OUTPUTS")]
    public UnityXRDataEvent onChange;
    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Private variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // ------------------------------------------------------------------------------------------------------------------------------------------------------


    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Send answer
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    public void Input(XRData A)
    {
        if (onChange != null)
        {
            switch (op)
            {
                case operation.plus:
                    onChange.Invoke(new XRData(A.ToInt() + B));
                    break;
                case operation.minus:
                    onChange.Invoke(new XRData(A.ToInt() - B));
                    break;
                case operation.divided_by:
                    onChange.Invoke(new XRData(A.ToInt() / B));
                    break;
                default:
                    onChange.Invoke(new XRData(A.ToInt() * B));
                break;
            }
        }
    }
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
}
